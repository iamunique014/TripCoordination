@model TripCoordination.Common.ViewModel.UserWithRoleViewModel
@{
    ViewData["Title"] = "Edit User Role";
}

<div class="page-title p-3 mt-3 label-control">
    <h3>Edit User Role</h3>
</div>

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger d-flex alert-container-lose alert-dismissible fade show" role="alert">
        <i class="bi bi-x-circle-fill me-2"></i>
        <div>
            @TempData["Error"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    </div>
}
else if (TempData["Failure"] != null)
{
    <div class="alert alert-danger d-flex alert-container-lose alert-dismissible fade show" role="alert">
        <i class="bi bi-x-circle-fill me-2"></i>
        <div>
            @TempData["Failure"]
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    </div>
}

<div class="form-container p-3">

    <div class="mb-4">
        <h5>User Information</h5>
        <p><strong>Name:</strong> @Model.FirstName @Model.LastName</p>
        <p><strong>Email:</strong> @Model.Email</p>
        <p><strong>Phone:</strong> @Model.PhoneNumber</p>
        <p><strong>Current Role:</strong> @Model.RoleName</p>
    </div>

    <form asp-action="EditUserRole" method="post">
        <input asp-for="Id" type="hidden" class="form-control" />

        <label asp-for="RoleID" class="label-control">Select Role</label>
        <select asp-for="RoleID" class="input-control" asp-items="ViewBag.AvailableRoles">
            <option disabled selected value="">-- Select Role --</option>
        </select>
        <span asp-validation-for="RoleID" class="text-danger"></span>

        <div class="text-center mt-3">
            <button type="submit" class="btn btn-primary w-50">Save</button>
        </div>
    </form>
</div>


@section Scripts {
    <script>
        setupDataTable('#userTable');
    </script>
}